<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>hacking Pi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="hacking Pi">
<meta property="og:url" content="https://hackingpi.com/index.html">
<meta property="og:site_name" content="hacking Pi">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="WingonChen">
<meta property="article:tag" content="Maker">
<meta property="article:tag" content="electronic">
<meta property="article:tag" content="technology">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="hacking Pi" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">hacking Pi</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://hackingpi.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-估计信号完整性效应的经验法则" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/18/%E4%BC%B0%E8%AE%A1%E4%BF%A1%E5%8F%B7%E5%AE%8C%E6%95%B4%E6%80%A7%E6%95%88%E5%BA%94%E7%9A%84%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/" class="article-date">
  <time datetime="2020-04-18T10:47:55.108Z" itemprop="datePublished">2020-04-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/18/%E4%BC%B0%E8%AE%A1%E4%BF%A1%E5%8F%B7%E5%AE%8C%E6%95%B4%E6%80%A7%E6%95%88%E5%BA%94%E7%9A%84%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/">估计信号完整性效应的经验法则</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>摘录自《信号完整性分析》附录B，方便查阅。</p>
<ul>
<li>当快速地得到粗略的结果比以后得到精确的结果更重要时，我们使用经验法则。</li>
<li>经验法则只是一种大概的近似估算，它的设计目的是以最小的工作量，以直觉为基础找到一个快速的答案。经验法则是估算的出发点，它帮助我们区分5或50，而且它能帮助我们在设计的早期阶段对设计有较好的整体规划。在速度和精度之间，经验法则倾向于速度，但它并不是很准确。</li>
<li>当然，不可以盲目地使用经验法则，它必须基于对基本原理的深刻理解和良好的工程判断能力。</li>
<li>当精确度很重要时，例如在设计中某个数值偏离百分之几就要付出百万美元的代价，就必须使用验证过的数值仿真工具。</li>
</ul>
<p>以下是许多的经验法则，分章节来介绍。</p>
<h4 id="第2章"><a href="#第2章" class="headerlink" title="第2章"></a>第2章</h4><ol>
<li>信号的上升时间约是时钟周期的10%，即1/10×1/Fclock。例如100MHz时钟的上升时间大约是1ns。</li>
<li>理想方波的n次方的振幅约是时钟电压幅值的2/(n*Pi)倍。例如，1V时钟的信号的第一次谐波幅度大约为0.6V，第3次谐波的幅度约是0.2V。</li>
<li>信号的带宽和上升时间的关系为：BW=0.35/RT。例如，如果上升时间是1ns，则带宽是350MHz。如果互连线的带宽是3GHz，则它可传输的最短上升时间约为0.1ns。</li>
<li>如果不知道上升时间，可以认为信号带宽约是时钟频率的5倍。例如，时钟频率是1GHz则信号带宽约是5GHz。</li>
</ol>
<h4 id="第3章"><a href="#第3章" class="headerlink" title="第3章"></a>第3章</h4><ol start="5">
<li>LC电路的谐振频率是5GHz/sqrt(LC)，L的单位是nH，C的单位为pF。例如，封装引线和它的返回路径自感是7nH，它的电容约为1pF，其振铃的频率约是2GHz。</li>
</ol>
<h4 id="第4章"><a href="#第4章" class="headerlink" title="第4章"></a>第4章</h4><ol start="6">
<li>在400MHz内，轴向引脚电阻可以看做理想电阻；在2GHz内，SMT0603电阻可看做理想电阻。</li>
<li>轴向引脚电阻的ESL（引线电感）约为8nH，SMT电阻的ESL约为1.5nH。</li>
<li>直径为1mil的金键合线的单位长度约是1ohm/in。例如，50mil长的金键合线的电阻约是50毫欧。</li>
<li>24AWG线的直径约是20mil，电阻率约为25mohm/ft。</li>
<li>1盎司铜线条的方块电阻率约是每方块0.5mohm。例如，5mil宽、1in长的线条，约有200个方块，其串联电阻是200×0.5=100mohm=0.1ohm。</li>
<li>在100MHz时，1盎司铜线条就开始具有趋肤效应。</li>
</ol>
<h4 id="第5章"><a href="#第5章" class="headerlink" title="第5章"></a>第5章</h4><ol start="12">
<li>直径为1in球面的电容约是2pF。例如，吊在板子外几英寸长的电缆与地间的电容约为2pF。</li>
<li>硬币般大小的一对平行板，板间填充空气时，它们间的电容约为1pF</li>
<li>当电容器两板间的距离与板子的宽度相当时，则边缘场产生的电容与平行板形成的场产生的电容相等。例如，在估算线宽为10mil，介质厚度为10mil的微带线的平行板电容时，其估算值为1pF/in，但实际的电容约是上述的两倍，也就是2pF/in。</li>
<li>如果我们对材料一无所知，之知道它是有机绝缘体，则认为它的介电常数约是4。</li>
<li>1片功率为1W的芯片，去耦电容（F)可以提供电荷使电压降小于5%的时间（s)是C/2。例如，如果去耦电容为10nF，它只能提供5ns的去耦时间。如果需要10us的去耦时间，就要使用20uF电容。</li>
<li>在典型电路板中，当介质厚度为10mil时，电源和地平面间的耦合电容是100pF每平方in，并且它与介质厚度成反比。例如，介质厚度为10mil的电路，可以为ASIC去耦的面积可能有4平方in，则去耦电容为0.5nF，去耦时间可达0.2ns。</li>
<li>如果50欧姆微带线的介电常数是4，则它的有效介电常数是3.</li>
</ol>
<h4 id="第6章"><a href="#第6章" class="headerlink" title="第6章"></a>第6章</h4><ol start="19">
<li>直径为1mil的圆导线的局部自感约是25nH/in或者1nH/mm。例如，1.5mm长的过孔的局部自感约是1.5nH。</li>
<li>由10mil厚的线条做成直径为1in的一个圆环线圈，它的大小相当于拇指和食指周围在一起，其回路电感约为85nH。</li>
<li>直径为1in的圆环单位长度电感约是25nH/in或1nH/in。例如，如果封装引线是环形的一部分，且长为0.5in，则它的电感约为12nH。</li>
<li>当一对圆杆的中心距离小于他们各自长度的10%时，局部互感约是各自局部自感的50%。例如，如果有两根键合线，长为1mm，中心局为0.1mm，则各自的局部自感约是1nH，而他们的局部互感约是0.5nH。</li>
<li>当一对圆杆的中心距与它们的各自长度相当时，他们之间的局部互感比他们各自的局部自感的10%还要小。例如，如果长25mil的平行过孔的中心距大于25mil，他们间几乎没有感性耦合。</li>
<li>SMT电容（包括表面布线，过孔以及电容本身)的回路电感大概为2nH，要将此数值降至1nH以下还需要许多工作。</li>
<li>平面上单位面积的回路电感是33pH×介质厚度（mil）。例如，如果介质厚度2mil，则平面间的单位面积回路电感是66pH。</li>
<li>过孔的直径越大，它的扩散电感就越低。一个直径为25mil过孔的扩散电感约为50pH。</li>
<li>如果有一个出砂孔区域，当空闲面积占到50%时，将会使平面对间的回路电感增加25%。</li>
<li>铜的趋肤深度与频率的平方根成反比，1GHz时，其为2um。所以，10MHz时，铜的趋肤深度是20um。</li>
<li>在50ohm的1盎司传输线中，当频率约高于50MHz时，单位长度回路电感为一常数。这说明在频率高于50MHz时，特性阻抗是一常数。</li>
</ol>
<h4 id="第7章"><a href="#第7章" class="headerlink" title="第7章"></a>第7章</h4><ol start="30">
<li>铜中电子的速度极慢，相当于蚂蚁的速度，也就是1cm/s。</li>
<li>信号在空气中的速度约为12in/ns。大多数聚合材料中的信号速度约为6in/ns。</li>
<li>大多数碾压材料中，线延迟1/v约是170ps/in。</li>
<li>信号的空间延伸等于上升时间×速度，即RT×6in/ns。例如，如果上升时间为0.5ns，当信号在板上传播时，其前沿的空间延伸是3in。</li>
<li>传输线的特性阻抗与单位长度电容成反比。</li>
<li>FR4中，所有50欧姆传输线的单位长度电容约为3.3pF/in。例如，BGA引线设计成50欧姆，且长度为0.5in，它的电容约是1.7pF。</li>
<li>FR4中，所有50欧姆传输线的单位长度电感约为8.3nH/in，例如，如果接头的阻抗为50欧姆，而且其长度是0.5in，则信号/返回路径的回路电感约是4nH.</li>
<li>对于FR4中的50欧姆微带线，其介质厚度约是线宽的一半。例如，如果线宽是10mil，则介质厚度约是5mil。</li>
<li>对于FR4中50欧姆带状线，其平面间的间隔是信号线线宽的2倍。例如，如果线宽是10mil，则两平面间的间隔是20mil。</li>
<li>在远小于信号的往返路径之内，传输线的阻抗就是特性阻抗。例如，当驱动一段3in长的50欧姆传输线时，所有上升时间短于1ns的驱动源在沿线传输并发生上升跳变时间内感受到的就是50欧姆恒定负载。</li>
<li>一段传输线的总电容和延时的关系为C=TD/Z0.例如，如果传输线的TD是1ns，特性阻抗为50欧姆，则信号路径和返回路径间的电容是20pF。</li>
<li>一段传输线的总回路电感和时延的关系是L=TD×Z0.例如，如果传输线的TD是1ns，特性阻抗是50欧姆，则信号路径和返回路径的回路电感是50nH。</li>
<li>如果50欧姆微带线的返回路经和信号线宽相等，则其特性阻抗比返回路径无限宽时的特性阻抗高20%。</li>
<li>如果50欧姆微带线中返回路径的宽度至少是信号线宽的3倍时，其特性阻抗比返回路径无限宽时的特性阻抗偏差小于1%。</li>
<li>布线的厚度可以影响特性阻抗，厚度增加1mil，阻抗就减少2欧姆。例如0.5盎司铜线与1盎司铜线相比，厚度增加了0.7mil，布线阻抗约减少了1欧姆。</li>
<li>微带线顶部的阻焊层厚度会使特性阻抗减少，厚度增加1mil，阻抗减少2欧姆。例如，0.5mil阻抗层会使特性阻抗约减少1欧姆。</li>
<li>为了得到精确的集总电路近似，在每个上升时间的空间延伸里至少需要有3.5个LC节。例如，如果上升时间是1ns，在FR4中的延伸空间是6in。那么为了达到精确的近似，在每个6in内至少需要3.5个LC节，即每隔2in就有1个节。</li>
<li>单节LC模型的带宽是0.1/TD，例如，假设传输线的时延是1ns，如果用单节LC电路模拟，则带宽可达到100MHz。</li>
</ol>
<h4 id="第8章"><a href="#第8章" class="headerlink" title="第8章"></a>第8章</h4><ol start="48">
<li>如果传输线的时延比信号上升时间的20%短，就不需要对传输线进行端接。</li>
<li>在50欧姆系统中，5欧姆的阻抗变化引起的反射是5%。</li>
<li>保持所有的突变（in）尽量短于上升时间的量值。例如，如果上升时间是0.5ns，应保持所有阻抗突变长度小于0.5in。如这样来设计过孔区域的颈状长度，就是可以接受的。</li>
<li>远端的容性负载会增加信号的上升时间。10-90上升时间约是（100×C）ps，其中C的单位为pF。例如，如果接收器的输入门电容的典型值是2pF，则RC制约的上升时间约是200ps。</li>
<li>如果突变的电容小于0.004×RT，则可能不会产生问题。例如，如果上升时间是1ns，突变电容小于0.004nF，即4pF。</li>
<li>50欧姆传输线中拐角的电容（fF）是线宽（mil）的2倍。例如，50欧姆线条的线宽是10mil，则在90度拐弯处的电容是20fF。当上升时间为0.02pF/0.004=5ps时，它可能会引起反射问题。</li>
<li>容性突变会使50%点的时延约增加0.5×Z0×C。例如，如果50欧姆传输线的电容是1pF，则增加的时延将是25ps.</li>
<li>如果突变的电感（nH）小于上升时间（ns）的10倍，则不会产生问题。例如，如果上升时间是1ns，最大可以接受的感性突变约是10nH。</li>
<li>对于上升时间小于1ns的信号，回路电感约为10nH的轴向引脚电阻可能会产生较多的反射噪声，这时可换成片式电阻。</li>
<li>在50欧姆系统中，需要用4pF电容来补偿10nH电感。</li>
</ol>
<h4 id="第9章"><a href="#第9章" class="headerlink" title="第9章"></a>第9章</h4><ol start="58">
<li>1GHz时，1盎司铜线的电阻约是其在DC状态下电阻的15倍。</li>
<li>1GHz时，8mil宽的线条的电阻产生的衰减与介质材料产生的衰减相当，并且介质材料产生的衰减随着频率变化得更快。</li>
<li>对于3mil或更宽的线条而言，低损耗状态全是发生在10MHz频率以上。在低损耗状态时，特征阻抗及信号速度与损耗和频率无关。在常见的板级互连中不存在由损耗引起的色散现象。</li>
<li>-3dB衰减相当于初始功率减小到50%，初始电压幅度减小到70%。</li>
</ol>
<p>未完，待补充</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hackingpi.com/2020/04/18/%E4%BC%B0%E8%AE%A1%E4%BF%A1%E5%8F%B7%E5%AE%8C%E6%95%B4%E6%80%A7%E6%95%88%E5%BA%94%E7%9A%84%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/" data-id="ck95jt3b500027sl0ak1zfas8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-FriendlyARM一线协议" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/18/FriendlyARM%E4%B8%80%E7%BA%BF%E5%8D%8F%E8%AE%AE/" class="article-date">
  <time datetime="2020-04-18T10:06:13.862Z" itemprop="datePublished">2020-04-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/18/FriendlyARM%E4%B8%80%E7%BA%BF%E5%8D%8F%E8%AE%AE/">FriendlyARM一线协议</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>主板和LCD驱动板通过一线协议通讯, 实现电阻触摸, 背光控制和识别型号等功能.</p>
<h4 id="读写"><a href="#读写" class="headerlink" title="读写"></a>读写</h4><ul>
<li>host发命令给client，格式为8bit cmd + 8bit crc。</li>
<li>client返回16bit data + 8bit crc。</li>
</ul>
<h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#define REQ_TS            0x40U      &#x2F;&#x2F; 获取触摸ADC值</span><br><span class="line">#define REQ_INFO          0x60U      &#x2F;&#x2F; 获取固件版本信息</span><br></pre></td></tr></table></figure>
<ul>
<li>发送0x80~0xff给client，直接设置背光。</li>
</ul>
<h4 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h4><ul>
<li>旧版本协议使用一根GPIO。</li>
<li>新版本使用一路I2C和一根GPIO。</li>
</ul>
<h4 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;proc&#x2F;driver&#x2F;one-wire-info   &#x2F;&#x2F; 输出LCD_TYPE, 固件版本，请求计数，通讯错误计数</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://hackingpi.com/2020/04/18/FriendlyARM%E4%B8%80%E7%BA%BF%E5%8D%8F%E8%AE%AE/" data-id="ck95jt3at00007sl0g1d72loi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/18/%E4%BC%B0%E8%AE%A1%E4%BF%A1%E5%8F%B7%E5%AE%8C%E6%95%B4%E6%80%A7%E6%95%88%E5%BA%94%E7%9A%84%E7%BB%8F%E9%AA%8C%E6%B3%95%E5%88%99/">估计信号完整性效应的经验法则</a>
          </li>
        
          <li>
            <a href="/2020/04/18/FriendlyARM%E4%B8%80%E7%BA%BF%E5%8D%8F%E8%AE%AE/">FriendlyARM一线协议</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 WingonChen<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>